////////////////////////////////////////////////////////////////////////////////
// Подсистема "Управление доступом".
// 
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Заполняет виды доступа, используемые в ограничениях прав доступа.
// Виды доступа Пользователи и ВнешниеПользователи уже заполнены.
// Их можно удалить, если они не требуются для ограничения прав доступа.
//
// Параметры:
//  ВидыДоступа - ТаблицаЗначений - с колонками:
//   * Имя                    - Строка - имя используемое в описании поставляемых
//                                       профилей групп доступа и текстах ОДД.
//   * Представление          - Строка - представляет вид доступа в профилях и группах доступа.
//   * ТипЗначений            - Тип    - тип ссылки значений доступа,
//                                       например, Тип("СправочникСсылка.Номенклатура").
//   * ТипГруппЗначений       - Тип    - тип ссылки групп значений доступа,
//                                       например, Тип("СправочникСсылка.ГруппыДоступаНоменклатуры").
//   * НесколькоГруппЗначений - Булево - Истина указывает, что для значения доступа (Номенклатуры), можно
//                                       выбрать несколько групп значений (Групп доступа номенклатуры).
//
Процедура ПриЗаполненииВидовДоступа(ВидыДоступа) Экспорт
	
	
	
КонецПроцедуры

// Заполняет описания поставляемых профилей групп доступа и
// переопределяет параметры обновления профилей и групп доступа.
//
// Для автоматической подготовки содержимого процедуры следует воспользоваться инструментами
// разработчика для подсистемы Управление доступом.
//
// Параметры:
//  ОписанияПрофилей    - Массив - массив структур, в который нужно добавить описания.
//                        Пустая структура должна быть получена при помощи функции.
//                        УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа.
//
//  ПараметрыОбновления - Структура - структура со свойствами:
//   * ОбновлятьИзмененныеПрофили - Булево - начальное значение Истина.
//   * ЗапретитьИзменениеПрофилей - Булево - начальное значение Истина.
//       Если установить Ложь, тогда поставляемые профили можно не только просматривать, но и редактировать.
//   * ОбновлятьГруппыДоступа     - Булево - начальное значение Истина.
//   * ОбновлятьГруппыДоступаСУстаревшимиНастройками - Булево - начальное значение Ложь.
//       Если установить Истина, то настройки значений, выполненные администратором для
//       вида доступа который был удален из профиля, будут также удалены из групп доступа.
//
Процедура ПриЗаполненииПоставляемыхПрофилейГруппДоступа(ОписанияПрофилей, ПараметрыОбновления) Экспорт
	// Профиль "Бухгалтер по учету денежных средств".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "ДенежныеСредства";
	ОписаниеПрофиля.Идентификатор = "2204d18c-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету денежных средств'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Денежные средства.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыДенежныеСредства");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету ОС".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "ОсновныеСредства";
	ОписаниеПрофиля.Идентификатор = "2204d18d-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету ОС'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Основные средства.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыОсновныеСредства");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);
	
	// Профиль "Бухгалтер по учету запасов".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "Запасы";
	ОписаниеПрофиля.Идентификатор = "2204d18e-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету запасов'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Запасы.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыЗапасы");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету МБП".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "МБП";
	ОписаниеПрофиля.Идентификатор = "2204d18f-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету МБП'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Малоценные и Быстроизнашивающиеся Предметы.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыМБП");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету аренды".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "Аренда";
	ОписаниеПрофиля.Идентификатор = "2204d190-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету аренды'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Аренда.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыАренда");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету персонала".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "Персонал";
	ОписаниеПрофиля.Идентификатор = "2204d192-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету персонала'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Персонал.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыПерсонал");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету заработной платы".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "Зарплата";
	ОписаниеПрофиля.Идентификатор = "2204d193-c8b2-11e5-833c-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету заработной платы'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом Зарплата.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыЗарплата");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету НДС".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();;
	ОписаниеПрофиля.Идентификатор = "3467ed99-cfb9-11e5-8344-5404a6a1f5c8";
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету НДС'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом НДС.'", );
			
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыНДС");
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);

	// Профиль "Бухгалтер по учету ФОП".
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();;
	ОписаниеПрофиля.Идентификатор = "3467ed9a-cfb9-11e5-8344-5404a6a1f5c8";
	ОписаниеПрофиля.Наименование = НСтр("ru = 'Бухгалтер по учету ФОП'");
	ОписаниеПрофиля.Описание = НСтр("ru = 'Под профилем осуществляется работа с разделом ФОП.'", );
	
	ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля);
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеПодсистемыНДС");
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);
	
		////////////////////////////////////////////////////////////////////////////////
	// Описание для заполнения и просмотра Паспортных данных в док Доверенность (дополнительно)".
	//
	ОписаниеПрофиля = УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа();
	ОписаниеПрофиля.Имя           = "ВидимостьПаспортныхДанных";
	ОписаниеПрофиля.Идентификатор = "3467ed9b-cfb9-11e5-8344-5404a6a1f5c8";	
	ОписаниеПрофиля.Наименование  = НСтр("ru = 'Видимость паспортных данных в документе Доверенность (дополнительно)'");
	ОписаниеПрофиля.Описание = НСтр(
		"ru = 'Служебный профиль, определяющий видимость паспортных данных в документе доверенность.'");
	
	//ОписаниеПрофиля.Роли.Добавить("ИспользованиеЗагрузкиДанныхИзВнешнегоИсточника");
	ОписаниеПрофиля.Роли.Добавить("ВидимостьПаспортныхДанных");
	
	ОписанияПрофилей.Добавить(ОписаниеПрофиля);
КонецПроцедуры

// Заполняет зависимости прав доступа "подчиненного" объекта, например, задачи ЗадачаИсполнителя,
// от "ведущего" объекта, например,  бизнес-процесса Задание, которые отличаются от стандартных.
//
// Зависимости прав используются в стандартном шаблоне ограничения доступа для вида доступа "Объект":
// 1) стандартно при чтении "подчиненного" объекта
//    проверяется наличие права чтения "ведущего" объекта
//    и проверяется отсутствие ограничения чтения "ведущего" объекта;
// 2) стандартно при добавлении, изменении, удалении "подчиненного" объекта
//    проверяется наличие права изменения "ведущего" объекта
//    и проверяется отсутствие ограничения изменения "ведущего" объекта.
//
// Допускается только одно переназначение по сравнению со стандартным:
// в пункте "2)" вместо проверки права изменения "ведущего" объекта установить
// проверку права чтения "ведущего" объекта.
//
// Параметры:
//  ЗависимостиПрав - ТаблицаЗначений - с колонками:
//   * ВедущаяТаблица     - Строка - например, Метаданные.БизнесПроцессы.Задание.ПолноеИмя().
//   * ПодчиненнаяТаблица - Строка - например, Метаданные.Задачи.ЗадачаИсполнителя.ПолноеИмя().
//
Процедура ПриЗаполненииЗависимостейПравДоступа(ЗависимостиПрав) Экспорт
	
	
	
КонецПроцедуры

// Заполняет описания возможных прав, назначаемых для объектов, указанных типов.
// 
// Параметры:
//  ВозможныеПрава - ТаблицаЗначений - с колонками, описание которых см. в комментарии
//                   к функции РегистрыСведений.НастройкиПравОбъектов.ВозможныеПрава().
//
Процедура ПриЗаполненииВозможныхПравДляНастройкиПравОбъектов(ВозможныеПрава) Экспорт
	
КонецПроцедуры

// Определяет вид используемого интерфейса пользователя для настройки доступа.
//
// Параметры:
//  УпрощенныйИнтерфейс - Булево - начальное значение Ложь.
//
Процедура ПриОпределенииИнтерфейсаНастройкиДоступа(УпрощенныйИнтерфейс) Экспорт
	УпрощенныйИнтерфейс = Истина;
КонецПроцедуры

// Заполняет использование видов доступа в зависимости от функциональных опций конфигурации,
// например, ИспользоватьГруппыДоступаНоменклатуры.
//
// Параметры:
//  ВидДоступа    - Строка - имя вида доступа заданное в процедуре ПриЗаполненииВидовДоступа.
//  Использование - Булево - начальное значение Истина.
// 
Процедура ПриЗаполненииИспользованияВидаДоступа(ВидДоступа, Использование) Экспорт
	
	
	
КонецПроцедуры

// Заполняет состав видов доступа, используемых при ограничении прав объектов метаданных.
// Если состав видов доступа не заполнен, отчет "Права доступа" покажет некорректные сведения.
//
// Обязательно требуется заполнить только виды доступа, используемые в шаблонах ограничения доступа
// явно, а виды доступа, используемые в наборах значений доступа могут быть получены из текущего
// состояния регистра сведений НаборыЗначенийДоступа.
//
//  Для автоматической подготовки содержимого процедуры следует воспользоваться инструментами
// разработчика для подсистемы Управление доступом.
//
// Параметры:
//  Описание     - Строка - многострочная строка формата <Таблица>.<Право>.<ВидДоступа>[.Таблица объекта],
//                 например, "Документ.ПриходнаяНакладная.Чтение.Организации",
//                           "Документ.ПриходнаяНакладная.Чтение.Контрагенты",
//                           "Документ.ПриходнаяНакладная.Изменение.Организации",
//                           "Документ.ПриходнаяНакладная.Изменение.Контрагенты",
//                           "Документ.ЭлектронныеПисьма.Чтение.Объект.Документ.ЭлектронныеПисьма",
//                           "Документ.ЭлектронныеПисьма.Изменение.Объект.Документ.ЭлектронныеПисьма",
//                           "Документ.Файлы.Чтение.Объект.Справочник.ПапкиФайлов",
//                           "Документ.Файлы.Чтение.Объект.Документ.ЭлектронноеПисьмо",
//                           "Документ.Файлы.Изменение.Объект.Справочник.ПапкиФайлов",
//                           "Документ.Файлы.Изменение.Объект.Документ.ЭлектронноеПисьмо".
//                 Вид доступа Объект предопределен, как литерал. Этот вид доступа используется в
//                 шаблонах ограничений доступа, как "ссылка" на другой объект, по которому
//                 ограничивается текущий объект таблицы.
//                 Когда вид доступа "Объект" задан, также требуется задать типы таблиц,
//                 которые используются для этого вида доступа. Т.е. перечислить типы,
//                 которые соответствуют полю, использованному в шаблоне ограничения доступа
//                 в паре с видом доступа "Объект". При перечислении типов по виду доступа "Объект"
//                 нужно перечислить только те типы поля, которые есть
//                 у поля РегистрыСведений.НаборыЗначенийДоступа.Объект, остальные типы лишние.
// 
Процедура ПриЗаполненииВидовОграниченийПравОбъектовМетаданных(Описание) Экспорт
	
	
	
КонецПроцедуры

// Позволяет реализовать перезапись зависимых наборов значений доступа других объектов.
//
//  Вызывается из процедур:
// УправлениеДоступомСлужебный.ЗаписатьНаборыЗначенийДоступа(),
// УправлениеДоступомСлужебный.ЗаписатьЗависимыеНаборыЗначенийДоступа().
//
// Параметры:
//  Ссылка       - СправочникСсылка, ДокументСсылка, ... - ссылка на объект для которого
//                 записаны наборы значений доступа.
//
//  СсылкиНаЗависимыеОбъекты - Массив - массив элементов типа СправочникСсылка, ДокументСсылка, ...
//                 Содержит ссылки на объекты с зависимыми наборами значений доступа.
//                 Начальное значение - пустой массив.
//
Процедура ПриИзмененииНаборовЗначенийДоступа(Ссылка, СсылкиНаЗависимыеОбъекты) Экспорт
	
	
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Процедура - Добавить роли БСПВОписание профиля
//
// Параметры:
//  ОписаниеПрофиля    - Структура - структура, в который нужно добавить описания.
//                        Пустая структура должна быть получена при помощи функции.
//                        УправлениеДоступом.НовоеОписаниеПрофиляГруппДоступа.
//
Процедура ДобавитьРолиБСПВОписаниеПрофиля(ОписаниеПрофиля)

	// Использование 1С:Предприятия.
	ОписаниеПрофиля.Роли.Добавить("ЗапускВебКлиента");
	ОписаниеПрофиля.Роли.Добавить("ЗапускТолстогоКлиента");
	ОписаниеПрофиля.Роли.Добавить("ЗапускТонкогоКлиента");
	ОписаниеПрофиля.Роли.Добавить("ВыводНаПринтерФайлБуферОбмена");
	ОписаниеПрофиля.Роли.Добавить("СохранениеДанныхПользователя");
	
	// Использование программы.
	ОписаниеПрофиля.Роли.Добавить("БазовыеПрава");
	ОписаниеПрофиля.Роли.Добавить("ПросмотрОписанияИзмененийПрограммы");
	
	// Использование НСИ.
	ОписаниеПрофиля.Роли.Добавить("ЧтениеКурсовВалют");
	
	// Типовые возможности.
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеЛичныхВариантовОтчетов");
	ОписаниеПрофиля.Роли.Добавить("ЧтениеДополнительныхОтчетовИОбработок");
	ОписаниеПрофиля.Роли.Добавить("ПросмотрСвязанныеДокументы");
	ОписаниеПрофиля.Роли.Добавить("ИспользованиеОбработкиТекущиеДела");
	
	// Основные возможности профиля.
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеЗаметок");
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеНапоминаний");
	
	// ОтветственныйЗаНормативноСправочнуюИнформацию
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеВидовКонтактнойИнформации");
	
	// Руководитель
	ОписаниеПрофиля.Роли.Добавить("ИзменениеМакетовПечатныхФорм");
	ОписаниеПрофиля.Роли.Добавить("ЧтениеУчетныхЗаписейЭлектроннойПочты");
	ОписаниеПрофиля.Роли.Добавить("ПросмотрЖурналаРегистрации");
	
	ОписаниеПрофиля.Роли.Добавить("ИспользованиеГлобальныхДополнительныхОтчетовИОбработок");
	
	// Использование 1С-Бухфон
	ОписаниеПрофиля.Роли.Добавить("Интеграция1СБухфон");
	
	// Административные возможности.
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеВариантовОтчетов");
	ОписаниеПрофиля.Роли.Добавить("ДобавлениеИзменениеДополнительныхОтчетовИОбработок");
	ОписаниеПрофиля.Роли.Добавить("РедактированиеРеквизитовОбъектов");
	ОписаниеПрофиля.Роли.Добавить("ИспользованиеУниверсальногоОтчета");
	
	// БП
	ОписаниеПрофиля.Роли.Добавить("БазовыеПраваПользователяБП");
	
КонецПроцедуры // ()
	
#КонецОбласти
