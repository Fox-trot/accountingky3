#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

Функция ПолучитьСкладПоУмолчанию(Пользователь = Неопределено) Экспорт
	
	ЗначениеПоУмолчанию = Справочники.Склады.ПустаяСсылка();
	
	// В информационной базе ведется учет по нескольким складам.
	// По умолчанию берем основной склад пользователя.
	ОсновнойСклад = ХранилищеОбщихНастроек.Загрузить("ОсновнойСклад",,, Пользователь);
	
	Если ТипЗнч(ОсновнойСклад) = ТипЗнч(ЗначениеПоУмолчанию) Тогда
		Если ОбщегоНазначения.СсылкаСуществует(ОсновнойСклад) Тогда
			ЗначениеПоУмолчанию = ОсновнойСклад;
		КонецЕсли;
	КонецЕсли;
	
	Возврат ЗначениеПоУмолчанию;

КонецФункции

#КонецЕсли